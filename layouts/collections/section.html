{{- define "main" -}}
<article class="content container mx-auto mt-16">
    {{partial "collection_sorter" .}}
    <section id="filter" class="filtr-container flex flex-wrap overflow-hidden">
        {{ range .Pages }}
        {{partial "collection_sorter_item" .}}
        {{ end }}
    </section>
</article>
{{- end -}}

{{- define "attached" -}}
<script>
Object.prototype.classHighlight = function (over, out) {
    var that = this.length ? this : [this];
    function onOver() {
        for (var i = 0, len = that.length; i < len; i++) {
            that[i].style.backgroundColor = over;
        }
    }
    function onOut() {
        for (var i = 0, len = that.length; i < len; i++) {
            that[i].style.backgroundColor = out;
        }
    }
    for (var i = 0, len = that.length; i < len; i++) {
        that[i].onmouseover = onOver;
        that[i].onmouseout = onOut;
    }
};
{{range $.Site.Data.categories}}{{range sort .categories "value" "asc"}}
document.getElementsByClassName('{{. | urlize}}').classHighlight('#f90', '#fff');
{{end}}{{end}}
</script>
<!-- <script>
const sections = document.querySelectorAll('.filter-item');
const links = document.querySelectorAll('.filter-links button');
let triggerVal;
let linkedVal;

links.forEach(function(link, index){
  link.addEventListener('mouseenter', (e) => {
        triggerVal = e.target.dataset.multifilter;
        console.log(triggerVal)
        for (const section of sections) {
            linkedVal = section.dataset.category;
            if (linkedVal === triggerVal) {
                section.classList.add('is-active');
            } else {
                section.classList.remove('is-active');
            }   
        }
    });
});
</script> -->
{{ $filter := .Site.Data.webpack.filter }}
{{ with $filter.js }}
<script src="{{ . | relURL }}" async></script>
{{ end }}
{{- end -}}